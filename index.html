<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>MIDI TEST</title>
</head>
<body>

<button id="btn">MIDI 有効化</button>
<pre id="log">未接続</pre>

<script>
const log = msg => document.getElementById("log").textContent = msg;

document.getElementById("btn").onclick = async () => {
  const midi = await navigator.requestMIDIAccess();
  const inputs = [...midi.inputs.values()];

  if (inputs.length === 0) {
    log("MIDIデバイスなし");
    return;
  }

  inputs.forEach(input => {
    input.onmidimessage = e => {
      log(`MIDI: ${e.data[0]}, ${e.data[1]}, ${e.data[2]}`);
    };
  });

  log("MIDI 接続成功");
};
</script>

</body>
</html>
